{% extends 'base.html' %}

{% block content %}
  <h1>{{ city.name }}</h1>

  {% if city.photo %}
    <img src="{{ city.photo.url }}" alt="{{ city.name }}" style="max-width:300px;">
  {% endif %}

  <p>–°—Ç—Ä–∞–Ω–∞: {{ city.country }}</p>
  <p>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: {{ city.latitude }}, {{ city.longitude }}</p>

  <!-- –ö–ù–û–ü–ö–ò –ò–ó–ë–†–ê–ù–ù–û–ì–û -->
  {% if user.is_authenticated %}
    {% if is_favorite %}
      <form action="{% url 'remove_favorite' city.pk %}" method="post" style="display:inline;">
        {% csrf_token %}
        <button type="submit" class="nav-btn">‚≠ê –£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ</button>
      </form>
    {% else %}
      <form action="{% url 'add_favorite' city.pk %}" method="post" style="display:inline;">
        {% csrf_token %}
        <button type="submit" class="nav-btn">‚òÜ –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
      </form>
    {% endif %}
  {% endif %}

  <!-- –ö–ù–û–ü–ö–ò –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø - –¢–û–õ–¨–ö–û –î–õ–Ø –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–û–í -->
  {% if user.is_staff %}
  <div style="display:flex; flex-direction:column; gap:10px; max-width:150px; margin-top:10px;">
    <a href="{% url 'city_update' city.pk %}" class="nav-btn">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
    <a href="{% url 'city_delete' city.pk %}" class="nav-btn">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</a>
  </div>
  {% endif %}

  <div style="margin-top:10px;">
    <a href="{% url 'city_list' %}" class="nav-btn">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>
  </div>

  <!-- –ë–õ–û–ö –ü–†–û–ì–ù–û–ó–û–í –ü–û–ì–û–î–´ -->
  {% if forecasts %}
    <h2 style="margin-top:20px;">–ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã</h2>
    {% for forecast in forecasts %}
      <div style="border:1px solid #ccc; padding:10px; margin:5px 0;">
        <p><strong>–î–∞—Ç–∞:</strong> {{ forecast.forecast_date }}</p>
        <p><strong>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:</strong> {{ forecast.temperature_min }}¬∞C - {{ forecast.temperature_max }}¬∞C</p>
        <p><strong>–£—Å–ª–æ–≤–∏—è:</strong> {{ forecast.condition }}</p>
        <p><strong>–í–ª–∞–∂–Ω–æ—Å—Ç—å:</strong> {{ forecast.humidity }}%</p>
      </div>
    {% endfor %}
  {% endif %}
{% endblock %}
