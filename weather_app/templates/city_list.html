{% extends "base.html" %}

{% block content %}
  <h1>–°–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤</h1>

  <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –≥–æ—Ä–æ–¥–∞ - –¢–û–õ–¨–ö–û –î–õ–Ø –ê–î–ú–ò–ù–û–í -->
  {% if user.is_staff %}
  <a href="{% url 'city_add' %}" class="nav-btn" style="display: block; margin-bottom: 15px;">
      ‚ûï –î–æ–±–∞–≤–∏—Ç—å –≥–æ—Ä–æ–¥
  </a>
  {% endif %}
  
  <a href="{% url 'city_search' %}" class="nav-btn" style="display: block; margin-bottom: 15px;">
      üîçÔ∏è –ü–æ–∏—Å–∫
  </a>
  
  <ul>
    {% for city in cities %}
      <li>
        <a href="{% url 'city_detail' city.pk %}">
          {{ city.name }} / {{ city.country }}
        </a>
        <!-- –ö–ù–û–ü–ö–ò –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø –¢–û–õ–¨–ö–û –î–õ–Ø –ê–î–ú–ò–ù–û–í –î–õ–Ø –í–°–ï–• –ì–û–†–û–î–û–í -->
        {% if user.is_staff %}
          <small style="margin-left: 10px;">
            <a href="{% url 'city_update' city.pk %}">[‚úèÔ∏è —Ä–µ–¥.]</a>
            <a href="{% url 'city_delete' city.pk %}">[üóëÔ∏è —É–¥.]</a>
          </small>
        {% endif %}
      </li>
    {% empty %}
      <p>–ì–æ—Ä–æ–¥–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</p>
    {% endfor %}
  </ul>

  <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
  {% if page_obj.paginator.num_pages > 1 %}
  <div class="pagination">
    <span class="step-links">
      {% if page_obj.has_previous %}
        <a href="?page=1">&laquo; –ø–µ—Ä–≤–∞—è</a>
        <a href="?page={{ page_obj.previous_page_number }}">–ø—Ä–µ–¥—ã–¥—É—â–∞—è</a>
      {% endif %}

      <span class="current">
        –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}
      </span>

      {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}">—Å–ª–µ–¥—É—é—â–∞—è</a>
        <a href="?page={{ page_obj.paginator.num_pages }}">–ø–æ—Å–ª–µ–¥–Ω—è—è &raquo;</a>
      {% endif %}
    </span>
  </div>

  <style>
    .pagination {
      margin-top: 2rem;
      text-align: center;
      padding: 1rem;
    }
    .step-links a {
      margin: 0 0.5rem;
      text-decoration: none;
      color: #007cba;
    }
    .current {
      margin: 0 1rem;
      font-weight: bold;
    }
  </style>
  {% endif %}
{% endblock %}
